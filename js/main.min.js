"use strict";document.addEventListener("DOMContentLoaded",(e=>{!function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let t=document.querySelector(".icon-menu"),s=document.querySelectorAll("._menu-btn"),o=document.querySelector("body"),i=document.querySelector(".menu__body");s.length>0&&s.forEach((e=>{e.addEventListener("click",(function(){t.classList.toggle("active"),o.classList.toggle("lock"),i.classList.toggle("active")}))})),function(){let e=[],t=document.querySelectorAll("[data-da]"),s=[],o=[];if(t.length>0){let r=0;for(let o=0;o<t.length;o++){const i=t[o],a=i.getAttribute("data-da");if(""!=a){const t=a.split(","),o=t[1]?t[1].trim():"last",c=t[2]?t[2].trim():"767",d="min"===t[3]?t[3].trim():"max",u=document.querySelector("."+t[0].trim());t.length>0&&u&&(i.setAttribute("data-da-index",r),e[r]={parent:i.parentNode,index:(n=i,l=void 0,l=Array.prototype.slice.call(n.parentNode.children),l.indexOf(n))},s[r]={element:i,destination:document.querySelector("."+t[0].trim()),place:o,breakpoint:c,type:d},r++)}}(i=s).sort((function(e,t){return e.breakpoint>t.breakpoint?-1:1})),i.sort((function(e,t){return e.place>t.place?1:-1}));for(let e=0;e<s.length;e++){const t=s[e],i=t.breakpoint,n=t.type;o.push(window.matchMedia("("+n+"-width: "+i+"px)")),o[e].addListener(a)}}var i,n,l;function a(e){for(let e=0;e<s.length;e++){const t=s[e],i=t.element,n=t.destination,l=t.place,a="_dynamic_adapt_"+t.breakpoint;if(o[e].matches){if(!i.classList.contains(a)){let e=c(n)[l];"first"===l?e=c(n)[0]:"last"===l&&(e=c(n)[c(n).length]),n.insertBefore(i,n.children[e]),i.classList.add(a)}}else i.classList.contains(a)&&(r(i),i.classList.remove(a))}}function r(t){const s=t.getAttribute("data-da-index"),o=e[s],i=o.parent,n=o.index,l=c(i,!0)[n];i.insertBefore(t,i.children[l])}function c(e,t){const s=e.children,o=[];for(let e=0;e<s.length;e++){const i=s[e];(t||null==i.getAttribute("data-da"))&&o.push(e)}return o}a()}();const n=$(".header__bottom").offset();if($(window).scroll((()=>{const e=$(window).scrollTop();$(document).width()>991.98?e>=n.top?$(".header").hasClass("scrolled")||$(".header").addClass("scrolled"):$(".header").removeClass("scrolled"):e>=50?$(".header").hasClass("scrolled")||$(".header").addClass("scrolled"):$(".header").removeClass("scrolled")})),$(".goto").click((function(){var e=$(this).attr("href").replace("#","");if(e){let t,s=0;return t=$(document).width()>991.98?$(".header__bottom").height():$("header").height(),console.log(t),$("body,html").animate({scrollTop:$("."+e).offset().top+s-t},700,(function(){})),$(".menu__body").hasClass("active")&&($(".menu__body,.icon-menu").removeClass("active"),$("body").removeClass("lock")),!1}})),$("body").on("click",".tab__navitem",(function(e){var t=$(this).index();if($(this).hasClass("parent"))t=$(this).parent().index();$(this).hasClass("active")||($(this).closest(".tabs").find(".tab__navitem").removeClass("active"),$(this).addClass("active"),$(this).closest(".tabs").find(".tab__item").removeClass("active").eq(t).addClass("active"),$(this).closest(".tabs").find(".slick-slider").length>0&&$(this).closest(".tabs").find(".slick-slider").slick("setPosition"))})),$(".works__items").length>0){$(".works__items").slick({autoplay:!1,infinite:!1,arrows:!0,slidesToShow:1,nextArrow:$(".works__slider .arrows__arrow_next"),prevArrow:$(".works__slider .arrows__arrow_prev")}),$(".works__items").on("beforeChange",((t,s,o,i)=>{e(i+1)}));const e=(e=1)=>{$(".works__slide-num").text((()=>`${e} из ${$(".works__item").length}`))};e()}function l(e){$(".popup").removeClass("active").hide(),setTimeout((function(){$("body").addClass("lock")}),300),history.pushState("","","#"+e),$(".popup-"+e).fadeIn(300).delay(300).addClass("active"),$(".popup-"+e).find(".slick-slider").length>0&&$(".popup-"+e).find(".slick-slider").slick("setPosition")}function a(){$(".popup").removeClass("active").fadeOut(300),$(".menu__body").hasClass("active")||$("body").removeClass("lock"),history.pushState("","",window.location.href.split("#")[0])}$(window).scroll((function(){$(window).width();$(window).scrollTop()>50?$("#up").fadeIn(300):$("#up").fadeOut(300)})),$("#up, .to-top").click((function(e){e.preventDefault(),$("body,html").animate({scrollTop:0},300)})),$(".pl").click((function(e){return l($(this).attr("href").replace("#","")),!1})),$(".popup-close,.popup__close").click((function(e){return a(),!1})),$(".popup").click((function(e){if(!$(e.target).is(".popup>.popup__container *")||$(e.target).is(".popup-close")||$(e.target).is(".popup__close"))return a(),!1})),$(document).on("keydown",(function(e){27==e.which&&a()}));(()=>{const e=document.forms;for(let s=0;s<e.length;s++){const o=e[s];o.addEventListener("submit",(e=>{e.preventDefault(),t(o)}))}async function t(e){let t=function(e){let t=0;const l=e.querySelectorAll("._req");for(let e=0;e<l.length;e++){const a=l[e];o(a),a.classList.contains("_email")?i(a)||(s(a),t++):a.classList.contains("_phone")?n(a)||(s(a),t++):a.value.trim().length<=1&&(s(a),t++)}return t}(e),a=new FormData(e);if(0===t){e.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:a});if(t.ok){await t.json();l("succes"),e.reset(),e.classList.remove("_sending")}else l("fail"),e.classList.remove("_sending")}}function s(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function o(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function i(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.value).toLowerCase())}function n(e){return/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im.test(String(e.value).toLowerCase())}})();const r=()=>{let e=0,t=1;return $(".form-calc__slider").each((function(){$(this).hasClass("_bool")?"Да"==$(this).find(".ui-slider-value").text()&&(t*=$(this).data().percent):e+=$(this).data().price*+$(this).find(".ui-slider-value").text()})),(e/2*t).toFixed()};$(".slider-range");$(".form-calc__slider").slider({min:100,max:1,create:function(){let e;e=$(this).hasClass("_bool")?1==$(this).slider("value")?"Да":"Нет":$(this).slider("value"),$(this).find(".ui-slider-value").text(e)},slide:function(e,t){let s;s=$(this).hasClass("_bool")?1==t.value?"Да":"Нет":t.value,$(this).find(".ui-slider-value").text(s),$(".calc__price p").text(r())}}),$(".form-calc__slider._bool").slider("option","min",0),$(".form-calc__slider_height").slider("option","max",400),$(".form-calc__slider_width").slider("option","max",600)}));